import{a as S,t as A,c as ze}from"../chunks/disclose-version.cES7AuCJ.js";import{i as Ie}from"../chunks/legacy.DjT5oY1Z.js";import{T as Ge,o as Be,av as Te,w as R,L as ie,M as He,B as Fe,R as De,a6 as Je,a7 as be,K as ne,x as Q,aw as ee,a8 as je,q as qe,a9 as We,ac as Pe,D as xe,ax as de,ay as ye,az as fe,aA as Ue,Q as Ve,aB as Ye,v as Xe,G as Ke,N as Qe,C as Ze,aC as $e,V as ea,a0 as we,aD as aa,I as sa,aE as ta,aF as ia,a5 as na,aG as ra,p as M,a as L,c as b,b as m,r as h,t as B,f as V,au as T,W as x,i as l,aH as Me,aI as la,aJ as va,l as ca,n as ae}from"../chunks/runtime.n2kpZNmJ.js";import{o as U,i as te,a as w,p as re,s as Ee,b as ue}from"../chunks/index-client.BvCsaOrG.js";import{w as Z,g as D}from"../chunks/index.CgpnaAiq.js";import{d as z,a as W}from"../chunks/store.GDphbUDx.js";let Ce=!1;function oa(){Ce||(Ce=!0,document.addEventListener("reset",s=>{Promise.resolve().then(()=>{var e;if(!s.defaultPrevented)for(const a of s.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function le(s,e){return e}function da(s,e,a,t){for(var i=[],r=e.length,n=0;n<r;n++)Ue(e[n].e,i,!0);var o=r>0&&i.length===0&&a!==null;if(o){var _=a.parentNode;Ve(_),_.append(a),t.clear(),J(s,e[0].prev,e[r-1].next)}Ye(i,()=>{for(var d=0;d<r;d++){var p=e[d];o||(t.delete(p.k),J(s,p.prev,p.next)),Xe(p.e,!o)}})}function se(s,e,a,t,i,r=null){var n=s,o={flags:e,items:new Map,first:null},_=(e&Te)!==0;if(_){var d=s;n=R?ie(Ke(d)):d.appendChild(Ge())}R&&He();var p=null,f=!1;Be(()=>{var v=a(),u=Fe(v)?v:v==null?[]:De(v),c=u.length;if(f&&c===0)return;f=c===0;let g=!1;if(R){var E=n.data===Je;E!==(c===0)&&(n=be(),ie(n),ne(!1),g=!0)}if(R){for(var N=null,y,I=0;I<c;I++){if(Q.nodeType===8&&Q.data===Qe){n=Q,g=!0,ne(!1);break}var k=u[I],C=t(k,I);y=Le(Q,o,N,null,k,C,I,i,e),o.items.set(C,y),N=y}c>0&&ie(be())}if(!R){var X=Ze;fa(u,o,n,i,e,(X.f&ee)!==0,t)}r!==null&&(c===0?p?je(p):p=qe(()=>r(n)):p!==null&&We(p,()=>{p=null})),g&&ne(!0),a()}),R&&(n=Q)}function fa(s,e,a,t,i,r,n){var me,pe,ge,he;var o=(i&$e)!==0,_=(i&(de|fe))!==0,d=s.length,p=e.items,f=e.first,v=f,u,c=null,g,E=[],N=[],y,I,k,C;if(o)for(C=0;C<d;C+=1)y=s[C],I=n(y,C),k=p.get(I),k!==void 0&&((me=k.a)==null||me.measure(),(g??(g=new Set)).add(k));for(C=0;C<d;C+=1){if(y=s[C],I=n(y,C),k=p.get(I),k===void 0){var X=v?v.e.nodes_start:a;c=Le(X,e,c,c===null?e.first:c.next,y,I,C,t,i),p.set(I,c),E=[],N=[],v=c.next;continue}if(_&&ua(k,y,C,i),k.e.f&ee&&(je(k.e),o&&((pe=k.a)==null||pe.unfix(),(g??(g=new Set)).delete(k))),k!==v){if(u!==void 0&&u.has(k)){if(E.length<N.length){var G=N[0],O;c=G.prev;var $=E[0],H=E[E.length-1];for(O=0;O<E.length;O+=1)Ne(E[O],G,a);for(O=0;O<N.length;O+=1)u.delete(N[O]);J(e,$.prev,H.next),J(e,c,$),J(e,H,G),v=G,c=H,C-=1,E=[],N=[]}else u.delete(k),Ne(k,v,a),J(e,k.prev,k.next),J(e,k,c===null?e.first:c.next),J(e,c,k),c=k;continue}for(E=[],N=[];v!==null&&v.k!==I;)(r||!(v.e.f&ee))&&(u??(u=new Set)).add(v),N.push(v),v=v.next;if(v===null)continue;k=v}E.push(k),c=k,v=k.next}if(v!==null||u!==void 0){for(var F=u===void 0?[]:De(u);v!==null;)(r||!(v.e.f&ee))&&F.push(v),v=v.next;var K=F.length;if(K>0){var Re=i&Te&&d===0?a:null;if(o){for(C=0;C<K;C+=1)(ge=F[C].a)==null||ge.measure();for(C=0;C<K;C+=1)(he=F[C].a)==null||he.fix()}da(e,F,Re,p)}}o&&Pe(()=>{var ke;if(g!==void 0)for(k of g)(ke=k.a)==null||ke.apply()}),xe.first=e.first&&e.first.e,xe.last=c&&c.e}function ua(s,e,a,t){t&de&&ye(s.v,e),t&fe?ye(s.i,a):s.i=a}function Le(s,e,a,t,i,r,n,o,_){var d=(_&de)!==0,p=(_&aa)===0,f=d?p?ea(i):we(i):i,v=_&fe?we(n):n,u={i:v,v:f,k:r,a:null,e:null,prev:a,next:t};try{return u.e=qe(()=>o(s,f,v),R),u.e.prev=a&&a.e,u.e.next=t&&t.e,a===null?e.first=u:(a.next=u,a.e.next=u.e),t!==null&&(t.prev=u,t.e.prev=u.e),u}finally{}}function Ne(s,e,a){for(var t=s.next?s.next.e.nodes_start:a,i=e?e.e.nodes_start:a,r=s.e.nodes_start;r!==t;){var n=sa(r);i.before(r),r=n}}function J(s,e,a){e===null?s.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function _a(s){if(R){var e=!1,a=()=>{if(!e){if(e=!0,s.hasAttribute("value")){var t=s.value;P(s,"value",null),s.value=t}if(s.hasAttribute("checked")){var i=s.checked;P(s,"checked",null),s.checked=i}}};s.__on_r=a,ta(a),oa()}}function ma(s,e){var a=s.__attributes??(s.__attributes={});a.value===(a.value=e??void 0)||s.value===e&&(e!==0||s.nodeName!=="PROGRESS")||(s.value=e)}function P(s,e,a,t){var i=s.__attributes??(s.__attributes={});R&&(i[e]=s.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&s.nodeName==="LINK")||i[e]!==(i[e]=a)&&(e==="style"&&"__styles"in s&&(s.__styles={}),e==="loading"&&(s[ia]=a),a==null?s.removeAttribute(e):typeof a!="string"&&pa(s).includes(e)?s[e]=a:s.setAttribute(e,a))}var Se=new Map;function pa(s){var e=Se.get(s.nodeName);if(e)return e;Se.set(s.nodeName,e=[]);for(var a,t=s,i=Element.prototype;i!==t;){a=ra(t);for(var r in a)a[r].set&&e.push(r);t=na(t)}return e}function ga(s,e){var a=s.__className,t=ha(e);R&&s.className===t?s.__className=t:(a!==t||R&&s.className!==t)&&(e==null?s.removeAttribute("class"):s.className=t,s.__className=t)}function ha(s){return s??""}function ve(s,e,a){if(a){if(s.classList.contains(e))return;s.classList.add(e)}else{if(!s.classList.contains(e))return;s.classList.remove(e)}}let Oe=Z(null),j=Z(null),ce=Z([]),Y=Z(null),oe=Z({groups:[],creatures:[]});function q(s,e){D(Oe).send(JSON.stringify({subject:s,data:e}))}function Ae(s,e=null){switch(s){case"browse":{console.log(e),ce.set(e.path),Y.set(e.id),oe.set({creatures:e.creatures,groups:e.groups});break}case"get_creature":{e.stats=JSON.parse(e.stats),e.text=JSON.parse(e.text),j.set(e);break}case"refresh_browser":{q("browse",D(Y));break}case"refresh_creature":{const a=D(j);a&&a.id===e&&q("get_creature",e);break}}}function ka(s,e){M(e,!1);function a(){t=new WebSocket(`wss://${window.location.host}:8080`),t.onmessage=function(i){const r=JSON.parse(i.data);console.log(r),Ae(r.subject,r.data)},t.onopen=function(){console.log("Connection Established!"),Ae("refresh_browser")},t.onclose=function(){console.log("Reconnecting..."),setTimeout(a,5e3)},Oe.set(t)}let t;U(a),Ie(),L()}var ba=A('<div class="navigation svelte-1nfemxk"><div class="top svelte-1nfemxk"><div class="logo svelte-1nfemxk"><span class="brand svelte-1nfemxk"><span class="highlight svelte-1nfemxk">ElysiaHub</span></span></div></div> <div class="bottom svelte-1nfemxk"><a href="/" class="svelte-1nfemxk"><div class="link svelte-1nfemxk"><i class="fa-solid fa-skull svelte-1nfemxk"></i> <span class="svelte-1nfemxk">&nbsp;&nbsp;Bestiary</span></div></a> <a href="/" class="svelte-1nfemxk"><div class="link svelte-1nfemxk"><i class="fa-solid fa-user svelte-1nfemxk"></i> <span class="svelte-1nfemxk">&nbsp;&nbsp;Character Creation</span></div></a> <a href="/" class="svelte-1nfemxk"><div class="link svelte-1nfemxk"><i class="fa-solid fa-location-dot svelte-1nfemxk"></i> <span class="svelte-1nfemxk">&nbsp;&nbsp;Interactive Map</span></div></a> <a href="/" class="svelte-1nfemxk"><div class="link svelte-1nfemxk"><i class="fa-solid fa-tools svelte-1nfemxk"></i> <span class="svelte-1nfemxk">&nbsp;&nbsp;Session Manager</span></div></a> <a href="/" class="svelte-1nfemxk"><div class="link svelte-1nfemxk"><i class="fa-solid fa-user svelte-1nfemxk"></i> <span class="svelte-1nfemxk">&nbsp;&nbsp;Status&nbsp;Viewer</span></div></a></div></div>');function xa(s,e){M(e,!1);function a(){const i=document.getElementById("viewport").offsetWidth;document.documentElement.style.setProperty("--nav-width",`${i}px`)}U(()=>{a(),window.onresize=a}),Ie();var t=ba();S(s,t),L()}function ya(){let s=prompt("Input group name:");s&&q("create_entry",{table:"Group",config:{name:s,path:D(Y)}})}function wa(){let s=prompt("Input creature name:");s&&q("create_entry",{table:"Creature",config:{name:s,path:D(Y)}})}function Ea(s,e){let a=prompt(`Input new name for "${e.selected.name}"? WARNING: If this is a creature that is currently being edited and has yet to be saved, any changes you make will probably be wiped, because I'm too lazy to fix it right now...`);a&&q("update_entry",{table:e.selected.table,id:e.selected.id,entry:{name:a}})}function Ca(s,e){confirm(`Delete "${e.selected.name}"?`)&&q("destroy_entry",{table:e.selected.table,id:e.selected.id})}var Na=A('<div class="option svelte-2v5s7v"><i class="fa-solid fa-tag svelte-2v5s7v"></i>Rename</div> <div class="option svelte-2v5s7v"><i class="fa-solid fa-trash svelte-2v5s7v"></i>Delete</div>',1),Sa=A('<div class="context-menu svelte-2v5s7v"><div class="option svelte-2v5s7v"><i class="fa-solid fa-folder svelte-2v5s7v"></i>New Group</div> <div class="option svelte-2v5s7v"><i class="fa-solid fa-skull svelte-2v5s7v"></i>New Creature</div> <!></div>');function Aa(s,e){M(e,!0);var a=Sa();a.__click=function(...o){var _;(_=e.onclick)==null||_.apply(this,o)};var t=b(a);t.__click=[ya];var i=m(t,2);i.__click=[wa];var r=m(i,2);{var n=o=>{var _=Na(),d=V(_);d.__click=[Ea,e];var p=m(d,2);p.__click=[Ca,e],S(o,_)};te(r,o=>{e.selected&&o(n)})}h(a),B(()=>P(a,"style",`top: ${e.y-184}px; left: ${e.x-60}px`)),S(s,a),L()}z(["click"]);var Ia=(s,e,a)=>e(l(a).id),Ta=A('<span class="svelte-jetk9b">&nbsp;/&nbsp;</span>'),Da=A('<a class="svelte-jetk9b"> </a><!>',1),ja=A('<div class="file-tree svelte-jetk9b"><div class="text svelte-jetk9b"></div></div>');function qa(s,e){M(e,!0);function a(n){q("browse",n)}let t=T(w([]));U(()=>{ce.subscribe(()=>{x(t,w(D(ce)))})});var i=ja(),r=b(i);se(r,23,()=>l(t),n=>n.id,(n,o,_)=>{var d=Da(),p=V(d);p.__click=[Ia,a,o];var f=b(p,!0);h(p);var v=m(p);{var u=c=>{var g=Ta();S(c,g)};te(v,c=>{l(_)<l(t).length-1&&c(u)})}B(()=>W(f,l(o).name)),S(n,d)}),h(r),h(i),S(s,i),L()}z(["click"]);var Ma=A('<div class="image svelte-7j5g4o"><img></div>');function _e(s,e){let a=re(e,"inline",3,!1),t=re(e,"resize",3,!1);var i=Ma(),r=b(i);h(i),B(()=>{ve(i,"inline",a()),ve(i,"resize",t()),P(r,"src",e.src)}),S(s,i)}function La(s,e){q("get_creature",e.id)}function Oa(s,e,a){e({table:"Creature",id:a.id,name:a.name}),s.preventDefault()}var Ra=A('<div class="creature svelte-572qp9"><div class="card svelte-572qp9"><!></div> <span class="name svelte-572qp9"> </span> <div class="created svelte-572qp9"><div class="icon svelte-572qp9"><i class="fa-solid fa-file"></i></div> </div> <div class="modified svelte-572qp9"><div class="icon svelte-572qp9"><i class="fa-solid fa-tools"></i></div> </div></div>');function za(s,e){M(e,!0);let a=re(e,"image",7);const t=Me("selectEntry");U(()=>{a()||a(`/static/img/deck.png?${Date.now()}`)});var i=Ra();i.__click=[La,e],i.__contextmenu=[Oa,t,e];var r=b(i),n=b(r);_e(n,{src:`/static/img/deck.png?${Date.now()??""}`}),h(r);var o=m(r,2),_=b(o,!0);h(o);var d=m(o,2),p=m(b(d));h(d);var f=m(d,2),v=m(b(f));h(f),h(i),B(()=>{P(i,"title",e.name),W(_,e.name),W(p,` ${e.created??""}`),W(v,` ${e.modified??""}`)}),S(s,i),L()}z(["click","contextmenu"]);function Ga(s,e){q("browse",e.id)}function Ba(s,e,a){e({table:"Group",id:a.id,name:a.name}),s.preventDefault()}var Ha=A('<div class="group svelte-1s84zey"><div class="icon svelte-1s84zey"><i class="fa-solid fa-folder"></i></div> <span class="name svelte-1s84zey"> </span> <!></div>');function Fa(s,e){M(e,!0);const a=Me("selectEntry");var t=Ha();t.__click=[Ga,e],t.__contextmenu=[Ba,a,e];var i=m(b(t),2),r=b(i,!0);h(i);var n=m(i,2);_e(n,{get src(){return e.image}}),h(t),B(()=>W(r,e.name)),S(s,t),L()}z(["click","contextmenu"]);var Ja=A('<div class="results svelte-rikq98"><div class="border svelte-rikq98"><div class="groups svelte-rikq98"></div> <!></div></div>');function Wa(s,e){M(e,!0);let a=T(w([])),t=T(w([]));oe.subscribe(()=>{console.log("UMMMMMMMM");const _=D(oe);x(a,w(_.groups)),x(t,w(_.creatures))});var i=Ja(),r=b(i),n=b(r);se(n,21,()=>l(a),le,(_,d)=>{Fa(_,Ee(()=>l(d)))}),h(n);var o=m(n,2);se(o,17,()=>l(t),le,(_,d)=>{za(_,Ee(()=>l(d)))}),h(r),h(i),S(s,i),L()}function Pa(s,e){l(e).value.toLowerCase()}function Ua(){const s=D(Y);[null,"search","trash"].includes(s)===!1&&q("elevate_path",D(Y))}var Va=A('<div class="searchbar svelte-xslhfg"><input spellcheck="false" class="svelte-xslhfg"> <i class="fa-solid fa-magnifying-glass svelte-xslhfg"></i> <i class="fa-solid fa-arrow-right-from-bracket svelte-xslhfg"></i></div>');function Ya(s,e){M(e,!0);let a=T(void 0);var t=Va(),i=b(t);i.__input=[Pa,a],ue(i,n=>x(a,n),()=>l(a));var r=m(i,4);r.__click=[Ua],h(t),S(s,t),L()}z(["input","click"]);var Xa=A('<div class="browser svelte-rekjhf"><!> <!> <!></div> <!>',1);function Ka(s,e){M(e,!0),la("selectEntry",y=>{x(o,w(y))});function a(){x(_,!1)}function t(y){l(o)===p?x(o,null):p=l(o),x(r,w(d.x)),x(n,w(d.y)),x(_,!0),y.preventDefault()}function i(y){d.x=y.clientX,d.y=y.clientY}let r=T(0),n=T(0),o=T(null),_=T(!1),d={x:0,y:0},p=null;var f=Xa(),v=V(f);v.__click=a,v.__contextmenu=t,v.__mousemove=i;var u=b(v);Ya(u,{});var c=m(u,2);qa(c,{});var g=m(c,2);Wa(g,{}),h(v);var E=m(v,2);{var N=y=>{Aa(y,{onclick:a,get selected(){return l(o)},get x(){return l(r)},get y(){return l(n)}})};te(E,y=>{l(_)&&y(N)})}S(s,f),L()}z(["click","contextmenu","mousemove"]);var Qa=A('<div class="screen-saver svelte-1xsbvkf"><!> <marquee direction="down" behavior="alternate" Scrollamount="6" class="svelte-1xsbvkf"><marquee behavior="alternate" Scrollamount="10" class="svelte-1xsbvkf"><img class="dvd svelte-1xsbvkf" src="/static/img/skull.png"></marquee></marquee></div>');function Za(s){var e=Qa(),a=b(e);_e(a,{resize:!0,src:"/static/img/bg/Forest.png"}),va(2),h(e),S(s,e)}function $a(){const s=D(j);let e=prompt(`Input new name for "${s.name}"? WARNING: This could wipe any changes you have not yet saved, because I'm too lazy to fix it right now...`);e&&q("update_entry",{table:"Creature",id:s.id,config:{name:e}})}function es(){const s=D(j);confirm(`Delete "${s.name}"?`)&&(q("destroy_entry",{table:"Creature",id:s.id}),j.set(null))}var as=A('<div class="quick-commands svelte-e9o131"><div class="border svelte-e9o131"><span class="svelte-e9o131"><i class="fa-solid fa-skull svelte-e9o131"></i>&nbsp;&nbsp;BESTIARY v1.0</span> <div class="commands svelte-e9o131"><div class="command svelte-e9o131"><div class="icon svelte-e9o131"><i class="fa-solid fa-floppy-disk"></i></div> <span class="svelte-e9o131">SAVE</span></div> <div class="command svelte-e9o131"><div class="icon svelte-e9o131"><i class="fa-solid fa-tag svelte-e9o131"></i></div> <span class="svelte-e9o131">RENAME</span></div> <div class="command svelte-e9o131"><div class="icon svelte-e9o131"><i class="fa-solid fa-xmark-circle svelte-e9o131"></i></div> <span class="svelte-e9o131">DELETE</span></div></div></div></div>');function ss(s,e){M(e,!0);var a=as(),t=b(a),i=m(b(t),2),r=b(i);r.__click=function(..._){var d;(d=e.uploadCommits)==null||d.apply(this,_)};var n=m(r,2);n.__click=[$a];var o=m(n,2);o.__click=[es],h(i),h(t),h(a),S(s,a),L()}z(["click"]);function ts(s,e){const a=D(j),t=l(e).files[0];if(a&&t){const i=new FormData;i.append("file",t),i.append("entry",a.id),fetch("/upload",{method:"POST",body:i}).then(r=>{if(r.ok){console.log(r.json());const n=t.name.split(".").pop();q("update_image",{id:a.id,extension:n})}else console.error(r.json())})}}var is=(s,e)=>l(e).click(),ns=A('<input type="file" accept="image/*" class="svelte-1ss5py3">  <div class="card svelte-1ss5py3"><div class="border svelte-1ss5py3"><img class="svelte-1ss5py3"></div> <div class="artwork svelte-1ss5py3"><img class="svelte-1ss5py3"></div> <span class="name svelte-1ss5py3"> </span></div>',1);function rs(s,e){M(e,!0);let a=T(void 0),t=T(void 0),i=T(void 0),r=ca(()=>l(t)??"/static/img/deck.png");U(()=>{j.subscribe(()=>{const g=D(j);x(a,w(g.name)),x(t,w(g.image))})});var n=ns(),o=V(n);o.__change=[ts,i],ue(o,g=>x(i,g),()=>l(i));var _=m(o,2);_.__click=[is,i];var d=b(_),p=b(d);h(d);var f=m(d,2),v=b(f);h(f);var u=m(f,2),c=b(u,!0);h(u),h(_),B(()=>{P(p,"src",`${l(r)??""}?${Date.now()??""}`),P(v,"src",`${l(r)??""}?${Date.now()??""}`),W(c,l(a))}),S(s,n),L()}z(["change","click"]);var ls=(s,e,a)=>e(a(),s.target.value),vs=A('<div class="value svelte-jql9f2"><div class="icon svelte-jql9f2"><i></i></div> <input class="svelte-jql9f2"> <div class="name"> </div></div>'),cs=A('<div class="stats svelte-jql9f2"><div class="center svelte-jql9f2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div>');function os(s,e){M(e,!0);const a=(I,k=ae,C=ae,X=ae)=>{var G=vs(),O=b(G),$=b(O);h(O);var H=m(O,2);_a(H),H.__change=[ls,i,k];var F=m(H,2),K=b(F,!0);B(()=>W(K,k().toUpperCase())),h(F),h(G),B(()=>{P(G,"title",C()),ga($,`fa-solid fa-${X()??""} svelte-jql9f2`),ma(H,l(t)[k()])}),S(I,G)};let t=T(w({}));function i(I,k){l(t)[I]=k,e.commitChange("stats",l(t))}U(()=>{j.subscribe(()=>{x(t,w(D(j).stats))})});var r=cs(),n=b(r),o=b(n);a(o,()=>"str",()=>"Strength",()=>"weight-hanging");var _=m(o,2);a(_,()=>"dex",()=>"Dexterity",()=>"hand");var d=m(_,2);a(d,()=>"agi",()=>"Agility",()=>"person-running");var p=m(d,2);a(p,()=>"end",()=>"Endurance",()=>"hourglass-start");var f=m(p,2);a(f,()=>"vit",()=>"Vitality",()=>"heart");var v=m(f,2);a(v,()=>"tou",()=>"Toughness",()=>"shield-halved");var u=m(v,2);a(u,()=>"wis",()=>"Wisdom",()=>"book");var c=m(u,2);a(c,()=>"wil",()=>"Willpower",()=>"ghost");var g=m(c,2);a(g,()=>"cha",()=>"Charisma",()=>"comment");var E=m(g,2);a(E,()=>"int",()=>"Intelligence",()=>"brain");var N=m(E,2);a(N,()=>"per",()=>"Perception",()=>"eye");var y=m(N,2);a(y,()=>"lck",()=>"Luck",()=>"dice"),h(n),h(r),S(s,r),L()}z(["change"]);function ds(s,e,a,t,i,r){let n=prompt("Input name for new tab:");n&&(l(e)[n]="",x(a,w(Object.keys(l(e)))),x(t,w(n)),l(i).value=l(e)[l(t)],r.commitChange("text",l(e)))}function fs(s,e,a,t,i){l(e)[l(a)]=l(t).value,i.commitChange("text",l(e))}var us=(s,e,a)=>e(a()),_s=(s,e,a)=>e(a()),ms=A('<div class="tab svelte-7lpvjr"><span> </span> <div class="icon svelte-7lpvjr"><i class="fa-solid fa-xmark svelte-7lpvjr"></i></div></div>'),ps=A('<div class="description svelte-7lpvjr"><div class="tabs svelte-7lpvjr"><!>  <div class="add svelte-7lpvjr"><div class="icon svelte-7lpvjr"><i class="fa-solid fa-plus svelte-7lpvjr"></i></div></div></div> <div class="border svelte-7lpvjr"><textarea class="svelte-7lpvjr"></textarea></div></div>');function gs(s,e){M(e,!0);const a=(g,E=ae)=>{var N=ms(),y=b(N);y.__click=[us,_,E];var I=b(y,!0);h(y);var k=m(y,2);k.__click=[_s,o,E],h(N),B(()=>{ve(N,"selected",l(r)===E()),W(I,E())}),S(g,N)};let t=T(w({})),i=T(void 0),r=T(void 0),n=T(void 0);function o(g){confirm(`Delete tab "${g}"?`)&&(delete l(t)[g],x(n,w(Object.keys(l(t)))),l(n).length===0&&(x(t,w({DEFAULT:""})),x(n,w(["DEFAULT"]))),l(r)===g&&(x(r,w(l(n)[0])),l(i).value=l(t)[l(r)]),e.commitChange("text",l(t)))}function _(g){x(r,w(g)),l(i).value=l(t)[l(r)]}U(()=>{j.subscribe(()=>{x(t,w(D(j).text)),x(n,w(Object.keys(l(t)))),l(n).length===0&&(x(t,w({DEFAULT:""})),x(n,w(["DEFAULT"]))),x(r,w(l(n)[0])),l(i).value=l(t)[l(r)]})});var d=ps(),p=b(d),f=b(p);se(f,17,()=>l(n),le,(g,E)=>{a(g,()=>l(E))});var v=m(f,2);v.__click=[ds,t,n,r,i,e],h(p);var u=m(p,2),c=b(u);c.__change=[fs,t,r,i,e],ue(c,g=>x(i,g),()=>l(i)),h(u),h(d),S(s,d),L()}z(["click","change"]);var hs=A('<!> <div class="display svelte-u0juig"><!> <!></div> <!>',1);function ks(s,e){M(e,!0);function a(f,v){const u={a:Object.keys(f),b:Object.keys(v)};for(let c=0;c<u.a.length;++c){const g=u.a[c];if(u.b.includes(g)){if(v[g]!==f[g])return!1}else return!1}for(let c=0;c<u.b.length;++c){const g=u.b[c];if(u.a.includes(g)===!1)return!1}return!0}function t(){const f=D(j);a(f.stats,n.stats)&&a(f.text,n.text)?console.log("Data unchanged! Skipping..."):(console.log("Data changed! Saving..."),q("update_entry",{table:"Creature",id:n.id,config:{stats:JSON.stringify(n.stats),text:JSON.stringify(n.text)}}))}function i(f,v){n[f]=v}let r=T(!1),n=w({});U(()=>{j.subscribe(()=>{const f=D(j);f?(n.id=f.id,n.name=f.name,n.image=f.image,n.stats=f.stats,n.text=f.text,x(r,!0)):x(r,!1)})});var o=ze(),_=V(o);{var d=f=>{var v=hs(),u=V(v);ss(u,{uploadCommits:t});var c=m(u,2),g=b(c);rs(g,{});var E=m(g,2);os(E,{commitChange:i}),h(c);var N=m(c,2);gs(N,{commitChange:i}),S(f,v)},p=f=>{Za(f)};te(_,f=>{l(r)?f(d):f(p,!1)})}S(s,o),L()}var bs=A('<div class="bestiary svelte-11h0dbi"><!> <!></div>');function xs(s){var e=bs(),a=b(e);Ka(a,{});var t=m(a,2);ks(t,{}),h(e),S(s,e)}var ys=A('<!> <div class="background svelte-bmi8sb"><img src="/static/img/bg/Celestial.jpg" class="svelte-bmi8sb"></div> <!> <div class="content svelte-bmi8sb"><!></div>',1);function Is(s){var e=ys(),a=V(e);ka(a,{});var t=m(a,4);xa(t,{});var i=m(t,2),r=b(i);xs(r),h(i),S(s,e)}export{Is as component};
